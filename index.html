<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini Flipkart</title>
<style>
  /* --- Cart Section Style Fix --- */
.cart-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: #fff;
  border: 1px solid #ddd;
  border-radius: 10px;
  padding: 10px;
  margin: 10px 0;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  transition: transform 0.2s ease;
}

.cart-item:hover {
  transform: scale(1.02);
}

.cart-item img {
  width: 80px;
  height: 80px;
  object-fit: cover;
  border-radius: 10px;
  margin-right: 15px;
}

.cart-info {
  flex-grow: 1;
  text-align: left;
}

.cart-info h3 {
  margin: 0;
  font-size: 16px;
  color: #333;
}

.cart-info p {
  margin: 5px 0;
  font-size: 14px;
  color: #555;
}

.remove-btn {
  background: #ff5252;
  color: white;
  border: none;
  padding: 6px 10px;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.3s;
}

.remove-btn:hover {
  background: #e04848;
}

.cart-summary {
  margin-top: 15px;
  font-size: 16px;
  font-weight: 600;
  text-align: right;
}

#checkout {
  background: #2874f0;
  color: #fff;
  border: none;
  padding: 8px 15px;
  border-radius: 6px;
  font-size: 15px;
  cursor: pointer;
  transition: background 0.3s;
}

#checkout:hover {
  background: #0a58ca;
}
</style>
</head>
<body>

<header>
  <div class="logo">MiniFlipkart</div>
  <input type="text" placeholder="Search for products">
  <a href="#cart-section" class="cart">üõí <span id="cart-count">0</span></a>
</header>

<div class="top-banner">üî• Big Sale! Up to 50% off on Electronics & Fashion! üî•</div>

<div class="featured-section">
  <h2>Featured Products</h2>
  <div class="featured-slider" id="featured-slider"></div>
</div>

<section class="category-section electronics">
  <div class="category-banner">üî• Top Deals in Electronics üî•</div>
  <h2>Electronics</h2>
  <div class="deal-slider" id="electronics-deals"></div>
  <div class="category-products" id="electronics-list"></div>
</section>

<section class="category-section fashion">
  <div class="category-banner">üíÉ Hot Fashion Deals üíÉ</div>
  <h2>Fashion</h2>
  <div class="deal-slider" id="fashion-deals"></div>
  <div class="category-products" id="fashion-list"></div>
</section>

<section class="category-section home">
  <div class="category-banner">üè† Home & Living Offers üè†</div>
  <h2>Home & Living</h2>
  <div class="deal-slider" id="home-deals"></div>
  <div class="category-products" id="home-list"></div>
</section>

<div id="cart-section">
  <h2>Your Cart</h2>
  <div class="cart-list"></div>
  <div class="cart-total">
    <p>Total: ‚Çπ<span id="total-amount">0</span></p>
    <button id="checkout">Checkout</button>
  </div>
</div>

<button id="back-to-top">‚¨Ü</button>

<footer>&copy; 2025 Mini Flipkart</footer>
<script>
/* --- JS WITH SIZE + SINGLE ITEM CART --- */
const products = [
  {name:"Smartphone",price:12999,category:"electronics",img:"https://dummyimage.com/200x200/2874f0/ffffff&text=Smartphone",offer:"50% OFF"},
  {name:"Headphones",price:1499,category:"electronics",img:"https://dummyimage.com/200x200/2874f0/ffffff&text=Headphones",offer:"Best Seller"},
  {name:"Smartwatch",price:5999,category:"electronics",img:"https://dummyimage.com/200x200/2874f0/ffffff&text=Smartwatch"},
  {name:"Laptop",price:45999,category:"electronics",img:"https://dummyimage.com/200x200/2874f0/ffffff&text=Laptop"},
  {name:"T-Shirt",price:499,category:"fashion",img:"https://dummyimage.com/200x200/fce4ec/000000&text=T-Shirt",offer:"20% OFF"},
  {name:"Shoes",price:1999,category:"fashion",img:"https://dummyimage.com/200x200/fce4ec/000000&text=Shoes"},
  {name:"Sofa",price:15999,category:"home",img:"https://dummyimage.com/200x200/fff3e0/000000&text=Sofa"},
  {name:"Lamp",price:999,category:"home",img:"https://dummyimage.com/200x200/fff3e0/000000&text=Lamp"}
];

let cart = JSON.parse(localStorage.getItem("cart")) || [];
const cartCount = document.getElementById("cart-count");
const cartList = document.querySelector(".cart-list");
const totalAmount = document.getElementById("total-amount");

function saveCart() {
  localStorage.setItem("cart", JSON.stringify(cart));
  cartCount.textContent = cart.length;
  renderCart();
}

function renderCart() {
  cartList.innerHTML = "";
  let total = 0;

  if (cart.length === 0) {
    cartList.innerHTML = "<p>Your cart is empty!</p>";
    totalAmount.textContent = "0";
    return;
  }

  cart.forEach((product, index) => {
    total += product.price;
    const item = document.createElement("div");
    item.className = "cart-item";
    item.innerHTML = `
      <img src="${product.img}" alt="${product.name}" width="100">
      <div class="cart-info">
        <h3>${product.name}</h3>
        ${product.size ? `<p>Size: <strong>${product.size}</strong></p>` : ""}
        <p>‚Çπ${product.price}</p>
      </div>
      <button class="remove-btn" data-index="${index}">Remove</button>
    `;
    cartList.appendChild(item);
  });

  totalAmount.textContent = total;

  document.querySelectorAll(".remove-btn").forEach(btn => {
    btn.addEventListener("click", () => {
      const idx = btn.getAttribute("data-index");
      cart.splice(idx, 1);
      saveCart();
    });
  });
}

// --- Product List with Size Selection ---
function populateProducts(sectionId, category) {
  const container = document.getElementById(sectionId);
  products.filter(p => p.category === category).forEach(product => {
    const card = document.createElement("div");
    card.className = "product-card";
    card.innerHTML = `
      <div class="product-image">
        <img src="${product.img}" alt="${product.name}">
        ${product.offer ? `<span class='offer-badge'>${product.offer}</span>` : ""}
      </div>
      <h3>${product.name}</h3>
      <p>‚Çπ${product.price}</p>
      <label style="font-size:12px;">Select Size:</label>
      <select class="size-select">
        <option value="S">S</option>
        <option value="M" selected>M</option>
        <option value="L">L</option>
        <option value="XL">XL</option>
      </select>
      <button>Add to Cart</button>
    `;

    const sizeSelect = card.querySelector(".size-select");
    card.querySelector("button").addEventListener("click", () => {
      const chosenSize = sizeSelect.value;
      const productWithSize = {...product, size: chosenSize};
      cart.push(productWithSize);
      saveCart();
      alert(`${product.name} (Size: ${chosenSize}) added to cart!`);
      document.querySelector("#cart-section").scrollIntoView({behavior:"smooth"});
    });

    container.appendChild(card);
  });
}

// --- Populate all categories ---
populateProducts("electronics-list", "electronics");
populateProducts("fashion-list", "fashion");
populateProducts("home-list", "home");
renderCart();

// --- Checkout ---
document.getElementById("checkout").addEventListener("click", () => {
  if (cart.length === 0) {
    alert("Your cart is empty!");
    return;
  }
  alert(`‚úÖ Order placed successfully!\nTotal: ‚Çπ${totalAmount.textContent}`);
  cart = [];
  saveCart();
});

// --- Back to Top Button ---
const backToTop = document.getElementById("back-to-top");
window.addEventListener("scroll", () => {
  backToTop.style.display = window.scrollY > 200 ? "block" : "none";
});
backToTop.addEventListener("click", () => {
  window.scrollTo({top: 0, behavior: "smooth"});
});
</script>
</body>
</html>
